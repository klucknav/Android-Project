CMAKE_MINIMUM_REQUIRED(VERSION 3.4.1)

# Specify critical zlib build variables.
# Build and reference OpenSceneGraph.
SET(DEP_PROJ_DIR "${EXT_PROJ_DIR}/dependencies")
SET(DEP_BUILD_DIR "${EXT_PROJ_DIR}/dependencies/build/${ANDROID_ABI}")

FILE(MAKE_DIRECTORY ${DEP_BUILD_DIR})
INCLUDE_DIRECTORIES(${DEP_PROJ_DIR})
INCLUDE_DIRECTORIES(${DEP_PROJ_DIR}/include)
INCLUDE_DIRECTORIES(${DEP_BUILD_DIR}/include)


SET(LIBJPEG_SOURCE_DIR "${DEP_PROJ_DIR}/libjpeg")
SET(LIBJPEG_BUILD_DIR "${LIBJPEG_SOURCE_DIR}/build/${ANDROID_ABI}")

INCLUDE_DIRECTORIES(${LIBJPEG_BUILD_DIR}/include)
INCLUDE_DIRECTORIES(${LIBJPEG_SOURCE_DIR})

FILE(MAKE_DIRECTORY ${LIBJPEG_BUILD_DIR})

SET(JPEG_LIBRARY "jpeg")
SET(JPEG_INCLUDE_DIR "${DEP_PROJ_DIR}/include" "${LIBJPEG_SOURCE_DIR}")
#message(STATUS "Jpeg found ${JPEG_INCLUDE_DIR}" )
SET(JPEG_FOUND "Yes")
#find_package(JPEG REQUIRED)


SET(LIBPNG_SOURCE_DIR "${DEP_PROJ_DIR}/libpng")
SET(LIBPNG_BUILD_DIR "${LIBPNG_SOURCE_DIR}/build/${ANDROID_ABI}")

INCLUDE_DIRECTORIES(${LIBPNG_BUILD_DIR}/include)
INCLUDE_DIRECTORIES(${LIBPNG_SOURCE_DIR})

FILE(MAKE_DIRECTORY ${LIBPNG_BUILD_DIR})

SET(PNG_LIBRARY "png")
SET(PNG_INCLUDE_DIR "${DEP_PROJ_DIR}/include" "${LIBPNG_SOURCE_DIR}")
SET(PNG_FOUND "Yes")
#find_package(PNG REQUIRED)

SET(LIBTIFF_SOURCE_DIR "${DEP_PROJ_DIR}/libtiff")
SET(LIBTIFF_BUILD_DIR "${LIBTIFF_SOURCE_DIR}/build/${ANDROID_ABI}")


INCLUDE_DIRECTORIES(${LIBTIFF_BUILD_DIR}/include)
INCLUDE_DIRECTORIES(${LIBTIFF_SOURCE_DIR})

FILE(MAKE_DIRECTORY ${LIBTIFF_BUILD_DIR})

SET(TIFF_LIBRARY "tiff")
SET(TIFF_INCLUDE_DIR "${DEP_PROJ_DIR}/include" "${LIBTIFF_SOURCE_DIR}")
SET(TIFF_FOUND "Yes")
#find_package(TIFF REQUIRED)

SET(FREETYPE_SOURCE_DIR "${DEP_PROJ_DIR}/freetype")
SET(FREETYPE_BUILD_DIR "${FREETYPE_SOURCE_DIR}/build/${ANDROID_ABI}")

INCLUDE_DIRECTORIES(${FREETYPE_BUILD_DIR}/include)
INCLUDE_DIRECTORIES(${FREETYPE_SOURCE_DIR}/include)

FILE(MAKE_DIRECTORY ${FREETYPE_BUILD_DIR})

SET(FREETYPE_LIBRARY "freetype")
SET(FREETYPE_INCLUDE_DIR "${DEP_PROJ_DIR}/include" "${FREETYPE_SOURCE_DIR}/include")
SET(FREETYPE_FOUND "Yes")


SET(PHYSX_SOURCE_DIR "${DEP_PROJ_DIR}/physx")
SET(PHYSX_BUILD_DIR "${PHYSX_SOURCE_DIR}/build/${ANDROID_ABI}")

INCLUDE_DIRECTORIES(${PHYSX_BUILD_DIR}/include)
INCLUDE_DIRECTORIES(${PHYSX_SOURCE_DIR}/include)

SET(PHYSX_LIBRARY "PhysX3")
SET(PHYSX_LIBRARIES "PhysX3" "LowLevel" "PhysX3Common" "PhysX3Extensions" "PhysX3Cooking")
SET(PHYSX_INCLUDE_DIR "${PHYSX_SOURCE_DIR}/include")
SET(PHYSX_FOUND "Yes")
add_definitions(-DPHYSX_VERSION=34)
add_definitions(-DHAVE_PHYSX)
add_definitions(-DNDEBUG)


#message(FATAL_ERROR  "path: ${PHYSX_BUILD_DIR}/libLowLevel.a")
add_library(LowLevel STATIC IMPORTED)
set_target_properties(LowLevel PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libLowLevel.a)
add_library(LowLevelAABB STATIC IMPORTED)
set_target_properties(LowLevelAABB PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libLowLevelAABB.a)
add_library(LowLevelCloth STATIC IMPORTED)
set_target_properties(LowLevelCloth PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libLowLevelCloth.a)

add_library(LowLevelDynamics STATIC IMPORTED)
set_target_properties(LowLevelDynamics PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libLowLevelDynamics.a)
add_library(LowLevelParticles STATIC IMPORTED)
set_target_properties(LowLevelParticles PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libLowLevelParticles.a)
add_library(PhysX3 STATIC IMPORTED)
set_target_properties(PhysX3 PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libPhysX3.a)

add_library(PhysX3CharacterKinematic STATIC IMPORTED)
set_target_properties(PhysX3CharacterKinematic PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libPhysX3CharacterKinematic.a)
add_library(PhysX3Common STATIC IMPORTED)
set_target_properties(PhysX3Common PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libPhysX3Common.a)
add_library(PhysX3Cooking STATIC IMPORTED)
set_target_properties(PhysX3Cooking PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libPhysX3Cooking.a)

add_library(PhysX3Extensions STATIC IMPORTED)
set_target_properties(PhysX3Extensions PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libPhysX3Extensions.a)

add_library(PhysX3Vehicle STATIC IMPORTED)
set_target_properties(PhysX3Vehicle PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libPhysX3Vehicle.a)
add_library(SceneQuery STATIC IMPORTED)
set_target_properties(SceneQuery PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libSceneQuery.a)
add_library(SimulationController STATIC IMPORTED)
set_target_properties(SimulationController PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libSimulationController.a)

add_library(PsFastXml STATIC IMPORTED)
set_target_properties(PsFastXml PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libPsFastXml.a)

add_library(PxFoundation STATIC IMPORTED)
set_target_properties(PxFoundation PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libPxFoundation.a)
add_library(PxPvdSDK STATIC IMPORTED)
set_target_properties(PxPvdSDK PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libPxPvdSDK.a)
add_library(PxTask STATIC IMPORTED)
set_target_properties(PxTask PROPERTIES IMPORTED_LOCATION
                      ${PHYSX_BUILD_DIR}/libPxTask.a)


#  PHYSX_INCLUDE_DIR - Where to find PHYSX includes
#  PHYSX_LIBRARIES   - List of libraries when using PHYSX
#  PHYSX_FOUND       - True if PHYSX was found

ADD_SUBDIRECTORY(${DEP_PROJ_DIR} ${DEP_BUILD_DIR})